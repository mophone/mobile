<!DOCTYPE html>
<html>
<head>
    <title>mobidik mobil</title>
    <link rel="stylesheet" href="./css/index.css" />
    <link rel="stylesheet" href="./css/fonts.css" />
    <link href="./css/font-awesome.min.css" rel="stylesheet" />
    <script type="text/javascript" charset="utf-8" src="phonegap.js"></script>
    <script type="text/javascript" charset="utf-8">

        document.addEventListener("deviceready", onDeviceReady, false);
        var fileSystemRoot = null;
        var directory = null;

        function onDeviceReady() {
            window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, onRequestFileSystemSuccess, null);
            downloadFile();

            //var ref = window.open('http://apache.org', '_blank', 'location=no');
            //ref.addEventListener('loadstart', function (event) { alert('start: ' + event.url); });
            //ref.addEventListener('loadstop', function (event) { alert('stop: ' + event.url); });
            //ref.addEventListener('loaderror', function (event) { alert('error: ' + event.message); });
            //ref.addEventListener('exit', function (event) { alert(event.type); });
        }



        function onRequestFileSystemSuccess(fileSystem) {
            fileSystemRoot = fileSystem.root;
            directory = fileSystemRoot.getDirectory("Mobidik", { create: true, exclusive: false }, onGetDirectorySuccess, onGetDirectoryFail);
        }

        function onGetDirectorySuccess(dir) {
            alert("Created dir " + dir.name);
        }

        function onGetDirectoryFail(error) {
            alert("Error creating directory " + error.code);
        }


        function downloadFile() {
            var sPath = directory.fullPath;
            var fileTransfer = new FileTransfer();

            fileTransfer.download(
                "http://www.w3.org/2011/web-apps-ws/papers/Nitobi.pdf",
                sPath + "theFile.pdf",
                function (theFile) {
                    console.log("download complete: " + theFile.toURI());
                    showLink(theFile.toURI());
                },
                function (error) {
                    alert("download error source " + error.source);
                    alert("download error target " + error.target);
                    alert("upload error code: " + error.code);
                }
            );
        };


    </script>
</head>
<body>
    <div class="header">
        <div class="title">mobidik</div>


    </div>
    <div class="menu_button"></div>
    <div class="search_button"></div>

    <span id="ready"></span>
</body>
</html>

