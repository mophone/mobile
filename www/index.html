<!DOCTYPE html>
<html>
<head>
    <title>mobidik mobil</title>
    <link rel="stylesheet" href="./css/index.css" />
    <link rel="stylesheet" href="./css/fonts.css" />
    <link href="./css/font-awesome.min.css" rel="stylesheet" />
    <script type="text/javascript" charset="utf-8" src="phonegap.js"></script>
    <script type="text/javascript" charset="utf-8">

        document.addEventListener("deviceready", onDeviceReady, false);

        function onDeviceReady() {
            downloadFile();
            //var ref = window.open('http://apache.org', '_blank', 'location=no');
            //ref.addEventListener('loadstart', function (event) { alert('start: ' + event.url); });
            //ref.addEventListener('loadstop', function (event) { alert('stop: ' + event.url); });
            //ref.addEventListener('loaderror', function (event) { alert('error: ' + event.message); });
            //ref.addEventListener('exit', function (event) { alert(event.type); });
        }

        function downloadFile() {
            window.requestFileSystem(
            LocalFileSystem.PERSISTENT, 0,
            function onFileSystemSuccess(fileSystem) {
                fileSystem.root.getFile(
                "dummy.html", { create: true, exclusive: false },
                function gotFileEntry(fileEntry) {
                    var sPath = fileEntry.fullPath.replace("dummy.html", "");
                    var fileTransfer = new FileTransfer();
                    fileEntry.remove();
                    fileTransfer.download(
                    "http://www.w3.org/2011/web-apps-ws/papers/Nitobi.pdf",
                    sPath + "theFile.pdf",
                    function (theFile) {
                        alert("download complete: " + theFile.toURI());
                        showLink(theFile.toURI());
                    },
                    function (error) {
                        alert("download error source " + error.source);
                        alert("download error target " + error.target);
                        alert("upload error code: " + error.code);
                    }
                    );
                },
                fail);
            },
            fail);
        }

        function showLink(url) {
            alert(url);
            var divEl = document.getElementById("ready");
            var aElem = document.createElement("a");
            aElem.setAttribute("target", "_blank");
            aElem.setAttribute("href", url);
            aElem.appendChild(document.createTextNode("Ready! Click To Open."))
            divEl.appendChild(aElem);
        }


        function fail(evt) {
            console.log(evt.target.error.code);
        }

    </script>
</head>
<body>
    <div class="header">
          <div class="title">mobidik</div>
        

    </div>
  <div class="menu_button"></div> 
    <div class="search_button"></div> 

     <span id="ready"></span>
</body>
</html>

